## 准备证书

__各组件所需证书__
* etcd    -   ca.pem server.pem server-key.pem
* kube-apiserver  -   ca.pem server.pem server-key.pem
* kubelet -   ca.pem ca-kay.pem
* kube-proxy  -   ca.pem kube-proxy.pem kube-proxy-key.pem
* kubectl -   ca.pem admin.pem admin-key.pem

__证书生成__
* 用openssl来完成ssl的认证非常麻烦 我们用cfssl来完成
* cfssl 用于生成证书<br>
cfssljson 用于将 json 文本导入证书<br>
cfssl-certinfo 查看证书信息
    ```
    wget https://pkg.cfssl.org/R1.2/cfssl_linux-amd64
    wget https://pkg.cfssl.org/R1.2/cfssljson_linux-amd64
    wget https://pkg.cfssl.org/R1.2/cfssl-certinfo_linux-amd64
    ```
* 赋予执行权限
    ```
    chmod +x cfssl_linux-amd64 cfssljson_linux-amd64 cfssl-certinfo_linux-amd64
    ```
* 加入到可直接执行命令中
    ```
    mv cfssl_linux-amd64 /usr/local/bin/cfssl
    mv cfssljson_linux-amd64 /usr/local/bin/cfssljson
    mv cfssl-certinfo_linux-amd64 /usr/local/bin/cfssl-certinfo
    ```
* 使用 cdssl 创建密钥示例
    ```
    cfssl print-defaults config > config.json #生成json形式的证书模板文件
    cfssl print-defaults csr > csr.json #生成证书请求文件
    ```
* 执行 [create_pem.sh](https://github.com/lcePolarBear/Kubernetes_Basic_Config_Note/blob/master/config-files/create_pem.sh) 脚本生成 pem 私钥文件